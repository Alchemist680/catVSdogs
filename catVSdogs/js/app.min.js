(()=>{"use strict";window.addEventListener("load",(function(){const t=document.querySelector("#game"),e=document.querySelector("#hero"),s=document.querySelector("#mainHeroes");let l,i=0,n=5,o=0,r=96,c=!1,a=!1,p="right",m=Math.ceil(Number.parseInt(getComputedStyle(e).left)/32),h=Math.ceil(Number.parseInt(getComputedStyle(e).bottom)/32),y=!1,f=[];function u(){"right"===p?(i<=-32?i=0:i-=32,s.style.transform="scale(1, 1)"):(i>=-160?i=-192:i+=32,s.style.transform="scale(-1, 1)"),s.style.top="-0px",s.style.left=i+"px",isHit=!0}function d(){o+=196,"right"===p?(n+=5,e.style.left=n+"%"):(n-=5,e.style.left=n+"%"),e.style.bottom=o+"px",b(),a=!!y}function x(e,s=1){const l=document.createElement("img");l.src="img/tiles/main.svg",l.style.cssText=`\n            position: absolute;\n            left: ${32*e}px;\n            bottom: ${32*s}px;\n            width: 32px;\n            height: 32px;\n        `,t.appendChild(l),f.push([e,s])}function g(e){x(e);const s=document.createElement("img");s.src="img/tiles/foundation.svg",s.style.cssText=`\n            position: absolute;\n            left: ${32*e}px;\n            bottom: 0;\n            width: 32px;\n            height: 32px;\n        `,t.appendChild(s)}function b(){m=Math.ceil(Number.parseInt(getComputedStyle(e).left)/32),h=Math.ceil(Number.parseInt(getComputedStyle(e).bottom)/32),y=!0;for(let t=0;t<f.length;t++)if(f[t][0]===m&&f[t][1]+1===h){y=!1;break}}function S(){l=setInterval((()=>{a?(o-=25,e.style.bottom=o+"px","right"===p?(i=-192,s.style.transform="scale(1, 1)"):(i=-288,s.style.transform="scale(-1, 1)"),s.style.top="-192px",s.style.left=i+"px",b(),y?a=!0:(a=!1,e.style.bottom=32*h+"px")):("right"===p?(i<=-96?i=0:i-=r,s.style.transform="scale(1, 1)"):(i>=-480?i=-576:i+=r,s.style.transform="scale(-1, 1)"),s.style.top="-96px",s.style.left=i+"px",c=!0)}),100)}document.addEventListener("keydown",(t=>{const o=t.code;if("KeyD"!==o&&"ArrowRight"!==o||(c&&(clearInterval(l),l=null,c=!1),l||(l=setInterval((()=>{i<=-576?i=0:i-=r,!(n>=90)&&(n+=1),e.style.left=n+"%",s.style.top="0px",s.style.transform="scale(1, 1)",s.style.left=i+"px",p="right",b(),a=!!y}),50))),"KeyA"!==o&&"ArrowLeft"!==o||(c&&(clearInterval(l),l=null,c=!1),l||(l=setInterval((()=>{i>=0?i=-576:i+=r,!(n<=5)&&(n-=1),e.style.left=n+"%",s.style.top="0px",s.style.transform="scale(-1, 1)",s.style.left=i+"px",p="left",b(),a=!!y}),50))),"KeyF"===o&&(c&&(clearInterval(l),l=null,c=!1),!l)){let t=0;l=setInterval((()=>{t++,u(),3==t&&(clearInterval(l),l=null,isHit=!1)}),200)}"KeyW"!==o&&"Space"!==o||d()})),document.addEventListener("keyup",(t=>{clearInterval(l),c=!0,S()}));class v{posX;posY;img;block;blockSize=96;SpriteMaxPosX=3;SpriteMaxPosY=1;SpritePosX=0;SpritePosY=0;timer;constructor(t,e){this.posX=t,this.posY=e,this.createEnimy(),this.lifeCycle()}createEnimy(){this.block=document.createElement("div"),this.block.style.cssText=`\n                position: absolute;\n                left: ${32*this.posX}px;\n                bottom: ${32*this.posY}px;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n            `,t.appendChild(this.block),this.img=document.createElement("img"),this.img.src="img/characters/enemies/StandDog.svg",this.img.style.cssText=`\n                position: absolute;\n                left: 0;\n                bottom: 0;\n                width: ${this.blockSize*this.SpriteMaxPosX}px;\n                height: ${this.blockSize*this.SpriteMaxPosY}px;\n            `,this.block.appendChild(this.img)}lifeCycle(){this.timer=setInterval((()=>{this.animateEnimy()}),100)}animateEnimy(){this.img.style.left=-this.SpritePosX*this.blockSize+"px",2===this.SpritePosX?this.SpritePosX=0:this.SpritePosX++}}!function(){S();for(let t=0;t<100;t++)t>10&&t<16||g(t);!function(t,e,s){for(let t=0;t<15;t++)x(10+t,10)}(),new v(25,2)}()}))})();