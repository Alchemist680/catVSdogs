(()=>{"use strict";window.addEventListener("load",(function(){const t=document.querySelector("#game"),s=document.querySelector("#hero"),e=document.querySelector("#mainHeroes");let i=0,a=32,l=0;const o=96;let h,n,r="stand",p="right",c=!0,m=Math.ceil(Number.parseInt(getComputedStyle(s).left)/32),f=Math.ceil(Number.parseInt(getComputedStyle(s).bottom)/32),S=!1,d=[];function y(t){clearInterval(h),clearInterval(n),h=null,n=null,c=!0,r=t}function g(s,e=1){const i=document.createElement("img");i.src="img/tiles/main.svg",i.style.cssText=`\n            position: absolute;\n            left: ${32*s}px;\n            bottom: ${32*e}px;\n            width: 32px;\n            height: 32px;\n        `,t.appendChild(i),d.push([s,e])}function x(s){g(s);const e=document.createElement("img");e.src="img/tiles/foundation.svg",e.style.cssText=`\n            position: absolute;\n            left: ${32*s}px;\n            bottom: 0;\n            width: 32px;\n            height: 32px;\n        `,t.appendChild(e)}function u(t,s,e){for(let i=0;i<e;i++)g(t+i,s)}function k(){m=Math.ceil(Number.parseInt(getComputedStyle(s).left)/32),f=Math.ceil(Number.parseInt(getComputedStyle(s).bottom)/32),S=!0;for(let t=0;t<d.length;t++)if(d[t][0]===m&&d[t][1]+1===f){S=!1;break}}document.addEventListener("keydown",(t=>{const c=t.code;if("KeyD"!==c&&"ArrowRight"!==c||"rightWalk"!=r&&"fall"!=r&&(y("rightWalk"),e.style.top="0px",e.style.transform="scale(1, 1)",p="right",h=setInterval((()=>{i<=-576?i=0:i-=o,e.style.left=i+"px"}),60),n=setInterval((()=>{!(a>=900)&&(a+=3),s.style.left=a+"px",k(),S&&y("fall")}),17)),"KeyA"!==c&&"ArrowLeft"!==c||"leftWalk"!=r&&"fall"!=r&&(y("leftWalk"),e.style.top="0px",e.style.transform="scale(-1, 1)",p="left",h=setInterval((()=>{i>=0?i=-576:i+=o,e.style.left=i+"px"}),60),n=setInterval((()=>{s.style.left=a+"px",!(a<=32)&&(a-=3),k(),S&&y("fall")}),17)),"KeyF"===c&&"jump"!=r&&"fall"!=r){let t=0;h=setInterval((()=>{t++,"right"===p?(i<=-32?i=0:i-=32,e.style.transform="scale(1, 1)"):(i>=-160?i=-192:i+=32,e.style.transform="scale(-1, 1)"),e.style.top="-0px",e.style.left=i+"px",isHit=!0,3==t&&(clearInterval(h),h=null,isHit=!1)}),200)}"KeyW"!==c&&"Space"!==c&&"ArrowUp"!==c||"jump"!=r&&"fall"!=r&&(y("jump"),function(){const t=l;l=32*f,e.style.top="-192px",n=setInterval((()=>{"right"===p?(i<=-384?i=0:i-=o,e.style.transform="scale(1, 1)"):(i>=377?i=-672:i+=o,e.style.transform="scale(-1, 1)"),e.style.left=i+"px"}),63.75),h=setInterval((()=>{l+=10,l-t>150&&(k(),y(S?"fall":"stand")),"right"===p?(a+=10,s.style.left=a+"px"):(a-=10,s.style.left=a+"px"),s.style.bottom=l+"px"}),17)}())})),document.addEventListener("keyup",(t=>{"fall"!=r&&"jump"!=r&&y("stand")}));class X{STAND="stand";ATTACK="attack";DEATH="death";WALK="walk";posX;posY;startX;travelInterval=6;direction=.1;img;block;blockSize=96;timer;animation;animationSome;state="stand";attack=!1;animateWasChanged=!0;SpriteMaxPosX=6;SpriteMaxPosY=5;SpritePosX=0;SpritePosY=0;NumPosStand=2;NumPosWalk=5;NumPosAttack=3;NUmPosDeath=6;constructor(t,s){this.posX=t,this.posY=s,this.startX=this.posX,this.createEnimy(),this.lifeCycle(),setInterval((()=>{this.state===this.STAND?this.changeAnimate(this.WALK):this.state===this.WALK&&this.changeAnimate(this.STAND)}),3e3)}createEnimy(){this.block=document.createElement("div"),this.block.style.cssText=`\n                position: absolute;\n                left: ${32*this.posX}px;\n                bottom: ${32*this.posY}px;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n            `,t.appendChild(this.block),this.img=document.createElement("img"),this.img.src="img/characters/enemies/StandDog.svg",this.img.style.cssText=`\n                position: absolute;\n                left: 0;\n                bottom: 0;\n                width: ${this.blockSize*this.SpriteMaxPosX}px;\n                height: ${this.blockSize*this.SpriteMaxPosY}px;\n            `,this.block.appendChild(this.img)}lifeCycle(){this.timer=setInterval((()=>{if(this.checkCollide(),this.animateWasChanged)switch(this.animateWasChanged=!1,this.state){case this.DEATH:this.deathAnimate();break;case this.WALK:this.walkAnimate();break;case this.STAND:this.standAnimate();break;case this.ATTACK:this.attackAnimate();break;case this.DEATH:this.deathAnimate()}}),100)}checkCollide(){f!=this.posY||m!=Math.floor(this.posX)&&m!=Math.floor(this.posX+2)&&m!=Math.floor(this.posX+1)?this.state===this.ATTACK&&(this.changeAnimate(this.WALK),this.attack=!1):this.attack||this.changeAnimate(this.ATTACK)}changeAnimate(t){clearInterval(this.animation),this.animation=null,clearInterval(this.animationSome),this.animationSome=null,this.state=t,this.animateWasChanged=!0}standAnimate(){this.img.style.top="0px",this.img.style.left="0px",this.SpritePosX=1,this.animation=setInterval((()=>{this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",-this.SpritePosX*this.blockSize>=-(this.SpriteMaxPosX-1-this.NumPosStand)*this.blockSize?this.SpritePosX=this.SpriteMaxPosX:(this.SpritePosX--,this.img.style.left=-this.SpritePosX*this.blockSize+"px")):(this.img.style.transform="scale(1, 1)",this.SpritePosX===this.NumPosStand?this.SpritePosX=0:this.SpritePosX++,this.img.style.left=-this.SpritePosX*this.blockSize+"px")}),100)}walkAnimate(){this.img.style.top=4*-this.blockSize+"px",this.img.style.left="0px",this.SpritePosX=1,this.animationSome=setInterval((()=>{this.posX>this.startX+this.travelInterval?(this.direction*=-1,this.img.style.transform="scale(1, 1)"):this.posX<=this.startX&&(this.direction=Math.abs(this.direction),this.img.style.transform="scale(-1, 1)"),this.posX+=this.direction,this.block.style.left=32*this.posX+"px"}),17),this.animation=setInterval((()=>{this.img.style.left=-this.SpritePosX*this.blockSize+"px",this.SpritePosX===this.NumPosWalk?this.SpritePosX=0:this.SpritePosX++}),100)}attackAnimate(){this.attack=!0,this.img.style.top=-2*this.blockSize+"px",this.img.style.left="0px",this.SpritePosX=0,this.animation=setInterval((()=>{this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",-this.SpritePosX*this.blockSize>=-(this.SpriteMaxPosX-1-this.NumPosAttack)*this.blockSize?this.SpritePosX=this.SpriteMaxPosX:(this.SpritePosX--,this.img.style.left=-this.SpritePosX*this.blockSize+"px")):(this.img.style.transform="scale(1, 1)",this.SpritePosX>=this.NumPosAttack?this.SpritePosX=0:(this.SpritePosX++,this.img.style.left=-this.SpritePosX*this.blockSize+"px"))}),150)}deathAnimate(){this.animation=setInterval((()=>{this.img.style.left=-this.SpritePosX*this.blockSize+"px",this.SpritePosX===this.NUmPosDeath?this.SpritePosX=0:this.SpritePosX++}),100)}}!function(){setInterval((()=>{c&&(c=!1,"fall"===r?(e.style.top="-192px","right"===p?(i=-192,e.style.transform="scale(1, 1)"):(i=-288,e.style.transform="scale(-1, 1)"),h=setInterval((()=>{l-=3,s.style.bottom=l+"px",k(),S||(s.style.bottom=32*f+"px",y("stand"))}),17),e.style.left=i+"px"):"stand"===r&&(h=setInterval((()=>{"right"===p?(i<=-96?i=0:i-=o,e.style.transform="scale(1, 1)"):(i>=-480?i=-576:i+=o,e.style.transform="scale(-1, 1)"),e.style.top="-96px",e.style.left=i+"px"}),100)))}),100);for(let t=0;t<100;t++)t>10&&t<12||x(t);u(10,6,15),u(34,2,5),new X(25,2)}()}))})();