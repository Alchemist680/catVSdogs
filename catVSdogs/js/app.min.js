(()=>{"use strict";window.addEventListener("load",(function(){const t=document.querySelector("#game"),e=document.querySelector("#hero"),s=document.querySelector("#mainHeroes");let i,a=0,n=32,o=0,l=96,h=!1,r=!1,m="right",c=Math.ceil(Number.parseInt(getComputedStyle(e).left)/32),p=Math.ceil(Number.parseInt(getComputedStyle(e).bottom)/32),d=!1,y=[];function f(){"right"===m?(a<=-32?a=0:a-=32,s.style.transform="scale(1, 1)"):(a>=-160?a=-192:a+=32,s.style.transform="scale(-1, 1)"),s.style.top="-0px",s.style.left=a+"px",isHit=!0}function S(){o+=196,"right"===m?(n+=250,e.style.left=n+"px"):(n-=250,e.style.left=n+"px"),e.style.bottom=o+"px",x(),r=!!d}function u(e,s=1){const i=document.createElement("img");i.src="img/tiles/main.svg",i.style.cssText=`\n            position: absolute;\n            left: ${32*e}px;\n            bottom: ${32*s}px;\n            width: 32px;\n            height: 32px;\n        `,t.appendChild(i),y.push([e,s])}function g(e){u(e);const s=document.createElement("img");s.src="img/tiles/foundation.svg",s.style.cssText=`\n            position: absolute;\n            left: ${32*e}px;\n            bottom: 0;\n            width: 32px;\n            height: 32px;\n        `,t.appendChild(s)}function x(){c=Math.ceil(Number.parseInt(getComputedStyle(e).left)/32),p=Math.ceil(Number.parseInt(getComputedStyle(e).bottom)/32),d=!0;for(let t=0;t<y.length;t++)if(y[t][0]===c&&y[t][1]+1===p){d=!1;break}}document.addEventListener("keydown",(t=>{const o=t.code;if("KeyD"!==o&&"ArrowRight"!==o||(h&&(clearInterval(i),i=null,h=!1),i||(i=setInterval((()=>{a<=-576?a=0:a-=l,!(n>=900)&&(n+=30),e.style.left=n+"px",s.style.top="0px",s.style.transform="scale(1, 1)",s.style.left=a+"px",m="right",x(),r=!!d}),100))),"KeyA"!==o&&"ArrowLeft"!==o||(h&&(clearInterval(i),i=null,h=!1),i||(i=setInterval((()=>{a>=0?a=-576:a+=l,!(n<=32)&&(n-=30),e.style.left=n+"px",s.style.top="0px",s.style.transform="scale(-1, 1)",s.style.left=a+"px",m="left",x(),r=!!d}),100))),"KeyF"===o&&(h&&(clearInterval(i),i=null,h=!1),!i)){let t=0;i=setInterval((()=>{t++,f(),3==t&&(clearInterval(i),i=null,isHit=!1)}),200)}"KeyW"!==o&&"Space"!==o&&"ArrowTop"!==o||S()})),document.addEventListener("keyup",(t=>{clearInterval(i),h=!0}));class b{STAND="stand";ATTACK="attack";DEATH="death";WALK="walk";posX;posY;startX;travelInterval=6;direction=.1;img;block;blockSize=96;timer;animation;animationSome;state="stand";animateWasChanged=!0;SpriteMaxPosX=3;SpriteMaxPosY=1;SpritePosX=0;SpritePosY=0;NumPosStand=2;NumPosAttack=1;NUmPosDeath=6;constructor(t,e){this.posX=t,this.posY=e,this.startX=this.posX,this.createEnimy(),this.changeAnimate(this.WALK),this.lifeCycle()}createEnimy(){this.block=document.createElement("div"),this.block.style.cssText=`\n                position: absolute;\n                left: ${32*this.posX}px;\n                bottom: ${32*this.posY}px;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n            `,t.appendChild(this.block),this.img=document.createElement("img"),this.img.src="img/characters/enemies/StandDog.svg",this.img.style.cssText=`\n                position: absolute;\n                left: 0;\n                bottom: 0;\n                width: ${this.blockSize*this.SpriteMaxPosX}px;\n                height: ${this.blockSize*this.SpriteMaxPosY}px;\n            `,this.block.appendChild(this.img)}lifeCycle(){this.timer=setInterval((()=>{if(this.animateWasChanged)switch(this.animateWasChanged=!1,this.state){case this.DEATH:this.deathAnimate();break;case this.WALK:this.walkAnimate();break;case this.STAND:this.standAnimate();break;case this.ATTACK:this.attackAnimate();break;case this.DEATH:this.deathAnimate()}}),100)}changeAnimate(t){clearInterval(this.animation),this.animation=null,clearInterval(this.animationSome),this.animationSome=null,this.state=t,this.animateWasChanged=!0}standAnimate(){this.animation=setInterval((()=>{this.img.style.left=-this.SpritePosX*this.blockSize+"px",this.SpritePosX===this.NumPosStand?this.SpritePosX=0:this.SpritePosX++}),100)}walkAnimate(){this.animationSome=setInterval((()=>{this.move()}),17),this.animation=setInterval((()=>{this.img.style.left=-this.SpritePosX*this.blockSize+"px",this.SpritePosX===this.NumPosStand?this.SpritePosX=0:this.SpritePosX++}),100)}move(){this.posX>this.startX+this.travelInterval?(this.direction*=-1,this.img.style.transform="scale(-1, 1)"):this.posX<=this.startX&&(this.direction=Math.abs(this.direction),this.img.style.transform="scale(1, 1)"),this.posX+=this.direction,this.block.style.left=32*this.posX+"px"}attackAnimate(){this.animation=setInterval((()=>{this.img.style.left=-this.SpritePosX*this.blockSize+"px",this.SpritePosX===this.NumPosAttack?this.SpritePosX=0:this.SpritePosX++}),100)}deathAnimate(){this.animation=setInterval((()=>{this.img.style.left=-this.SpritePosX*this.blockSize+"px",this.SpritePosX===this.NUmPosDeath?this.SpritePosX=0:this.SpritePosX++}),100)}}!function(){setInterval((()=>{r?(o-=15,e.style.bottom=o+"px","right"===m?(a=-192,s.style.transform="scale(1, 1)"):(a=-288,s.style.transform="scale(-1, 1)"),s.style.top="-192px",s.style.left=a+"px",x(),d?r=!0:(r=!1,e.style.bottom=32*p+"px")):("right"===m?(a<=-96?a=0:a-=l,s.style.transform="scale(1, 1)"):(a>=-480?a=-576:a+=l,s.style.transform="scale(-1, 1)"),s.style.top="-96px",s.style.left=a+"px",h=!0)}),100);for(let t=0;t<100;t++)t>10&&t<16||g(t);!function(t,e,s){for(let t=0;t<15;t++)u(10+t,10)}(),new b(25,2)}()}))})();