(()=>{"use strict";window.addEventListener("load",(function(){const t=document.querySelector("#game"),s=new class{img;x;src="img/icons/heart.svg";block;blockSize=32;maxPosXSprite=4;generateHearts(s,e){this.block=document.createElement("div"),this.block.classList.add("active"),this.block.id="heart",this.block.style.cssText=`\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                position: absolute;\n                overflow: hidden;\n                top: ${32*e}px;\n                left: ${32*s}px;\n            `,this.img=document.createElement("img"),this.img.src=this.src,this.img.style.cssText=`\n                width: ${this.blockSize*this.maxPosXSprite}px;\n                height: ${this.block}px;\n                position: absolute;\n                top: 0px;\n                left: 0px;\n            `,t.appendChild(this.block),this.block.appendChild(this.img)}};function e(){const t=document.querySelectorAll("#heart.active");if(t.length){const s=t[t.length-1];s.classList.remove("active");const e=s.querySelector("img");let i=0;const l=setInterval((()=>{i<=3?(e.style.left=32*-i+"px",i++):clearInterval(l)}),100)}}const i=document.querySelector("#hero"),l=document.querySelector("#mainHeroes");let a=5,h=0,o=32,n=0;const r=96;let c,p,m="stand",S="right",f=!0,d=Math.ceil(Number.parseInt(getComputedStyle(i).left)/32),g=Math.ceil(Number.parseInt(getComputedStyle(i).bottom)/32),y=!1,x=[];function b(t){clearInterval(c),clearInterval(p),c=null,p=null,f=!0,m=t}function u(s,e=1){const i=document.createElement("img");i.src="img/tiles/main.svg",i.style.cssText=`\n            position: absolute;\n            left: ${32*s}px;\n            bottom: ${32*e}px;\n            width: 32px;\n            height: 32px;\n        `,t.appendChild(i),x.push([s,e])}function k(s){u(s);const e=document.createElement("img");e.src="img/tiles/foundation.svg",e.style.cssText=`\n            position: absolute;\n            left: ${32*s}px;\n            bottom: 0;\n            width: 32px;\n            height: 32px;\n        `,t.appendChild(e)}function X(t,s,e){for(let i=0;i<e;i++)u(t+i,s)}function P(){d=Math.ceil(Number.parseInt(getComputedStyle(i).left)/32),g=Math.ceil(Number.parseInt(getComputedStyle(i).bottom)/32),y=!0;for(let t=0;t<x.length;t++)if(x[t][0]===d&&x[t][1]+1===g){y=!1;break}}document.addEventListener("keydown",(t=>{const s=t.code;"KeyD"!==s&&"ArrowRight"!==s||"rightWalk"!=m&&"fall"!=m&&(b("rightWalk"),l.style.top="0px",l.style.transform="scale(1, 1)",S="right",c=setInterval((()=>{h<=-576?h=0:h-=r,l.style.left=h+"px"}),60),p=setInterval((()=>{!(o>=2e3)&&(o+=3),i.style.left=o+"px",P(),y&&b("fall")}),17)),"KeyA"!==s&&"ArrowLeft"!==s||"leftWalk"!=m&&"fall"!=m&&(b("leftWalk"),l.style.top="0px",l.style.transform="scale(-1, 1)",S="left",c=setInterval((()=>{h>=0?h=-576:h+=r,l.style.left=h+"px"}),60),p=setInterval((()=>{i.style.left=o+"px",!(o<=32)&&(o-=3),P(),y&&b("fall")}),17)),"KeyF"===s&&"jump"!=m&&"fall"!=m&&"hit"!=m&&(b("hit"),l.style.top="-288px","right"===S?(l.style.transform="scale(1, 1)",l.style.left="0px",h=0,c=setInterval((()=>{h<=-480?b("stand"):(h-=r,l.style.left=h+"px")}),150)):(l.style.transform="scale(-1, 1)",l.style.left="-96px",h=-96,c=setInterval((()=>{h<=-576?b("stand"):(h-=r,l.style.left=h+"px")}),150))),"KeyW"!==s&&"Space"!==s&&"ArrowUp"!==s||"jump"!=m&&"fall"!=m&&(b("jump"),function(){const t=n;n=32*g,l.style.top="-192px",p=setInterval((()=>{"right"===S?(h<=-384?h=0:h-=r,l.style.transform="scale(1, 1)"):(h>=377?h=-672:h+=r,l.style.transform="scale(-1, 1)"),l.style.left=h+"px"}),63.75),c=setInterval((()=>{n+=10,n-t>150&&(P(),b(y?"fall":"stand")),"right"===S?(o+=10,i.style.left=o+"px"):(o-=10,i.style.left=o+"px"),i.style.bottom=n+"px"}),17)}())})),document.addEventListener("keyup",(t=>{"fall"!=m&&"jump"!=m&&"hit"!=m&&b("stand")}));class A{STAND="stand";ATTACK="attack";DEATH="death";WALK="walk";HURT="hurt";posX;posY;startX;travelInterval=6;direction=.1;img;block;blockSize=96;timer;animation;animationSome;state="stand";attack=!1;animateWasChanged=!0;SpriteMaxPosX=6;SpriteMaxPosY=5;SpritePosX=0;SpritePosY=0;NumPosStand=2;NumPosHurt=1;NumPosWalk=5;NumPosAttack=3;NUmPosDeath=6;lives=2;constructor(t,s){this.posX=t,this.posY=s,this.startX=this.posX,this.createEnimy(),this.lifeCycle(),this.changeAnimate(this.WALK)}createEnimy(){this.block=document.createElement("div"),this.block.style.cssText=`\n                position: absolute;\n                left: ${32*this.posX}px;\n                bottom: ${32*this.posY}px;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n            `,t.appendChild(this.block),this.img=document.createElement("img"),this.img.src="img/characters/enemies/StandDog.svg",this.img.style.cssText=`\n                position: absolute;\n                left: 0;\n                bottom: 0;\n                width: ${this.blockSize*this.SpriteMaxPosX}px;\n                height: ${this.blockSize*this.SpriteMaxPosY}px;\n            `,this.block.appendChild(this.img)}lifeCycle(){this.timer=setInterval((()=>{if(this.checkCollide(),this.animateWasChanged)switch(this.animateWasChanged=!1,this.state){case this.DEATH:this.deathAnimate();break;case this.HURT:this.hurtAnimate();break;case this.WALK:this.walkAnimate();break;case this.STAND:this.standAnimate();break;case this.ATTACK:this.attackAnimate();break;case this.DEATH:this.deathAnimate()}}),100)}checkCollide(){g!=this.posY||d!=Math.floor(this.posX)&&d!=Math.floor(this.posX+2)&&d!=Math.floor(this.posX+1)?this.state===this.ATTACK&&(this.changeAnimate(this.WALK),this.attack=!1):"hit"===m&&this.state!=this.HURT?(this.changeAnimate(this.HURT),a--,a<=0&&this.changeAnimate(this.DEATH)):this.attack||this.changeAnimate(this.ATTACK)}changeAnimate(t){clearInterval(this.animation),this.animation=null,clearInterval(this.animationSome),this.animationSome=null,this.state=t,this.animateWasChanged=!0}standAnimate(){this.img.style.top="0px",this.img.style.left="0px",this.SpritePosX=1,this.animation=setInterval((()=>{this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",-this.SpritePosX*this.blockSize>=-(this.SpriteMaxPosX-1-this.NumPosStand)*this.blockSize?this.SpritePosX=this.SpriteMaxPosX:(this.SpritePosX--,this.img.style.left=-this.SpritePosX*this.blockSize+"px")):(this.img.style.transform="scale(1, 1)",this.SpritePosX===this.NumPosStand?this.SpritePosX=0:this.SpritePosX++,this.img.style.left=-this.SpritePosX*this.blockSize+"px")}),100)}walkAnimate(){this.img.style.top=4*-this.blockSize+"px",this.img.style.left="0px",this.SpritePosX=1,this.animationSome=setInterval((()=>{this.posX>this.startX+this.travelInterval?(this.direction*=-1,this.img.style.transform="scale(1, 1)"):this.posX<=this.startX&&(this.direction=Math.abs(this.direction),this.img.style.transform="scale(-1, 1)"),this.posX+=this.direction,this.block.style.left=32*this.posX+"px"}),17),this.animation=setInterval((()=>{this.img.style.left=-this.SpritePosX*this.blockSize+"px",this.SpritePosX===this.NumPosWalk?this.SpritePosX=0:this.SpritePosX++}),100)}attackAnimate(){this.attack=!0,this.img.style.top=-2*this.blockSize+"px",this.img.style.left="0px",this.SpritePosX=0,this.animation=setInterval((()=>{this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",-this.SpritePosX*this.blockSize>=-(this.SpriteMaxPosX-1-this.NumPosAttack)*this.blockSize?(this.SpritePosX=this.SpriteMaxPosX,a--,e()):(this.SpritePosX--,this.img.style.left=-this.SpritePosX*this.blockSize+"px")):(this.img.style.transform="scale(1, 1)",this.SpritePosX>=this.NumPosAttack?(this.SpritePosX=0,a--,e()):(this.SpritePosX++,this.img.style.left=-this.SpritePosX*this.blockSize+"px"))}),150)}deathAnimate(){this.img.style.top=-1*this.blockSize+"px",this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",this.img.style.left=-(this.maxPosXSprite-this.NUmPosDeath*this.blockSize)+"px",this.posXSprite=this.maxPosXSprite-this.NUmPosDeath,c=setInterval((()=>{this.posXSprite>=this.maxPosXSprite?(clearInterval(c),this.changeAnimate(this.STAND)):(this.img.style.left=-this.maxPosXSprite*this.blockSize+"px",this.posXSprite++)}),300)):(this.img.style.transform="scale(1, 1)",this.img.style.left="0px",this.posXSprite=0,c=setInterval((()=>{this.posXSprite>=this.NUmPosDeath?(clearInterval(c),this.changeAnimate(this.STAND)):(this.img.style.left=this.posXSprite*this.blockSize+"px",this.posXSprite++)}),300))}hurtAnimate(){this.img.style.top=-3*this.blockSize+"px",this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",this.img.style.left=-(this.maxPosXSprite-this.NumPosHurt)*this.blockSize+"px"):(this.img.style.transform="scale(1, 1)",this.img.style.left=-this.NumPosHurt*this.blockSize+"px"),setTimeout((()=>{this.changeAnimate(this.ATTACK)}),300)}}!function(){setInterval((()=>{f&&(f=!1,"fall"===m?(l.style.top="-192px","right"===S?(h=-192,l.style.transform="scale(1, 1)"):(h=-288,l.style.transform="scale(-1, 1)"),c=setInterval((()=>{n-=3,i.style.bottom=n+"px",P(),y||(i.style.bottom=32*g+"px",b("stand"))}),17),l.style.left=h+"px"):"stand"===m&&(c=setInterval((()=>{"right"===S?(h<=-96?h=0:h-=r,l.style.transform="scale(1, 1)"):(h>=-480?h=-576:h+=r,l.style.transform="scale(-1, 1)"),l.style.top="-96px",l.style.left=h+"px"}),100)))}),100);for(let t=0;t<100;t++)t>10&&t<12||k(t);X(10,6,15),X(34,2,5),new A(25,2);for(let t=.5;t<a+.5;t++)s.generateHearts(t,.5)}()}))})();