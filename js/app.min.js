(()=>{"use strict";window.addEventListener("load",(function(){const t=new Audio("audio/main2.mp3");let e;t.play();let s="default";document.addEventListener("click",(function(i){const n=i.target;if(n.closest("[data-close-for-custom-popup]")){const t=n.closest("[data-custom-popup]");if(t){t.classList.remove("open"),document.body.style.overflow="auto",document.body.style.paddingRight=0;const e=document.querySelector("header");e&&(e.style.paddingRight=0)}}if(n.closest("[data-button-for-open-custom-popup]")){e&&"pause"===s&&(e.startTimer(),s="default");const t=n.closest("[data-button-for-open-custom-popup]").dataset.buttonForOpenCustomPopup,o=document.querySelector(`[data-custom-popup="${t}"]`);if(o){o.classList.add("open");const t=window.innerWidth-document.body.offsetWidth+"px";document.body.style.paddingRight=t,document.body.style.overflow="hidden";const e=document.querySelector("header");e&&(e.style.paddingRight=t),i.preventDefault()}}else if(!n.closest("[data-custom-popup].open [data-custom-popup-content]")){e&&"pause"===s&&(e.startTimer(),s="default");const t=document.querySelector("[data-custom-popup].open");if(t){t.classList.remove("open"),document.body.style.overflow="auto",document.body.style.paddingRight=0;const e=document.querySelector("header");e&&(e.style.paddingRight=0)}}if(n.closest("#settings")){const t=s,n=document.querySelector(`[data-custom-popup="${t}"]`);if(n){e&&"default"===s&&(e.stopTimer(),s="pause",n.querySelector(".timeGame").innerText=e.getTime()),n.classList.add("open");const t=window.innerWidth-document.body.offsetWidth+"px";document.body.style.paddingRight=t,document.body.style.overflow="hidden";const o=document.querySelector("header");o&&(o.style.paddingRight=t),i.preventDefault()}}n.closest(".levels__item")&&t.play()}));const i=document.querySelector("#game");let n,o=!0,a=!1;const l=new class{img;x;src="img/icons/heart.svg";block;blockSize=32;maxPosXSprite=4;generateHearts(t,e){this.block=document.createElement("div"),this.block.classList.add("active"),this.block.id="heart",this.block.style.cssText=`\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                position: absolute;\n                overflow: hidden;\n                top: ${32*e}px;\n                left: ${32*t}px;\n                z-index: 600;\n            `,this.img=document.createElement("img"),this.img.src=this.src,this.img.style.cssText=`\n                width: ${this.blockSize*this.maxPosXSprite}px;\n                height: ${this.block}px;\n                position: absolute;\n                top: 0px;\n                left: 0px;\n            `,i.appendChild(this.block),this.block.appendChild(this.img)}},h=document.querySelector("#hero"),r=document.querySelector("#mainHeroes");let c=[],m=8,p=m,d=0,x=0;const y=96;let u,f,g,b=7,S="stand",k="right",v=!0,X=Math.ceil(Number.parseInt(getComputedStyle(h).left)/32),P=Math.ceil(Number.parseInt(getComputedStyle(h).bottom)/32),T=!1,w=!1,I=!1,A=[],z=[],C=document.createElement("div");function $(t){clearInterval(u),clearInterval(f),u=null,f=null,v=!0,S=t}function M(){C.style.left=Number.parseInt(C.style.left)-8+"px",A.map((t=>{t[0]=t[0]-1/4})),z.map((t=>{t.moveRight()}))}function L(){C.style.left=Number.parseInt(C.style.left)+8+"px",A.map((t=>{t[0]=t[0]+1/4})),z.map((t=>{t.moveLeft()}))}C.style.cssText="\n        position: absolute;\n        left: 0px;\n        top: 0px;\n        width: 100%;\n        height: 100%;\n    ",i.appendChild(C),document.addEventListener("keydown",(function(t){const i=t.code;if(o&&(!1===a&&(a=!0,e=new U),"KeyD"!==i&&"ArrowRight"!==i||w||"rightWalk"!=S&&"fall"!=S&&"hurt"!=S&&"death"!=S&&($("rightWalk"),r.style.top="0px",r.style.transform="scale(1, 1)",k="right",u=setInterval((()=>{d<=-y*(b-1)?d=0:d-=y,r.style.left=d+"px"}),60),f=setInterval((()=>{H()&&(M(),W(),T&&$("fall"),w&&$("stand"))}),17)),"KeyA"!==i&&"ArrowLeft"!==i||I||"leftWalk"!=S&&"fall"!=S&&"hurt"!=S&&"death"!=S&&($("leftWalk"),r.style.top="0px",r.style.transform="scale(-1, 1)",k="left",u=setInterval((()=>{d>=0?d=-y*(b-1):d+=y,r.style.left=d+"px"}),60),f=setInterval((()=>{H()&&!I&&Number.parseInt(C.style.left)<0&&(L(),W(),T&&$("fall"))}),17)),"KeyF"===i&&"jump"!=S&&"fall"!=S&&"hit"!=S&&"hurt"!=S&&"death"!=S&&($("hit"),r.style.top=3*-y+"px","right"===k?(r.style.transform="scale(1, 1)",r.style.left="0px",d=0,u=setInterval((()=>{d<=5*-y?$("stand"):(d-=y,r.style.left=d+"px")}),150),setTimeout((()=>{new N}),600)):(r.style.transform="scale(-1, 1)",r.style.left=-(b*y-6*y)+"px",d=-(b*y-6*y),u=setInterval((()=>{d<=-(b-1)*y?$("stand"):(d-=y,r.style.left=d+"px")}),150),setTimeout((()=>{new N}),600))),("KeyW"===i||"Space"===i||"ArrowUp"===i&&"death"!=S)&&"jump"!=S&&"fall"!=S&&"hurt"!=S&&($("jump"),function(){x=32*P;const t=x;r.style.top=2*-y+"px","right"===k?(r.style.left="0px",d=0,r.style.transform="scale(1, 1)"):(r.style.left=-y*b+"px",d=-y*(b-1),r.style.transform="scale(-1, 1)"),f=setInterval((()=>{"right"===k?d<=3*-y?d=0:d-=y:d>=-(b-3*y)?d=-y*b:d+=y,r.style.left=d+"px"}),85),u=setInterval((()=>{x+=8,function(){if(q(),"right"===k){for(let t=0;t<A.length;t++)if(Math.ceil(A[t][0])===X+2&&Math.ceil(A[t][1])+1===P+2)return!1}else for(let t=0;t<A.length;t++)if(Math.ceil(A[t][0])===X+1&&Math.ceil(A[t][1])+1===P+2)return!1;return!0}()||$("fall"),x-t>150?(W(),T?$("fall"):(h.style.bottom=32*P+"px",$("stand"))):h.style.bottom=x+"px","right"===k?M():Number.parseInt(C.style.left)<0&&L()}),17)}())),"Escape"===i){const i=document.querySelector("[data-custom-popup].open");if(e&&"pause"===s&&(s="default",e.startTimer()),i){i.classList.remove("open"),document.body.style.overflow="auto",document.body.style.paddingRight=0;const t=document.querySelector("header");t&&(t.style.paddingRight=0)}else{const i=s,n=document.querySelector(`[data-custom-popup="${i}"]`);if(n){e&&"default"===s&&(e.stopTimer(),s="pause",n.querySelector(".timeGame").innerText=e.getTime()),n.classList.add("open");const i=window.innerWidth-document.body.offsetWidth+"px";document.body.style.paddingRight=i,document.body.style.overflow="hidden";const o=document.querySelector("header");o&&(o.style.paddingRight=i),t.preventDefault()}}}})),document.addEventListener("keyup",(t=>{"fall"!=S&&"jump"!=S&&"hit"!=S&&"hurt"!=S&&"death"!=S&&$("stand")}));class N{x=X+1;fishXPos=32*this.x;flightDistance=300;y=P;animation;fish;blockSize=55;constructor(){this.createFish(),this.animateFish()}createFish(){this.fish=document.createElement("div");const t=document.createElement("img");this.fish.style.cssText=`\n                position: absolute;\n                left: ${32*this.x}px;\n                bottom: ${32*this.y}px;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n            `,i.appendChild(this.fish),t.src="img/fish.png",t.style.cssText=`\n                position: absolute;\n                left: 0;\n                bottom: 0;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n            `,"left"===k&&(t.style.transform="scale(-1, 1)"),this.fish.appendChild(t)}animateFish(){const t=this.fishXPos;this.animation="right"===k?setInterval((()=>{this.fishXPos+=12,this.fish.style.left=this.fishXPos+"px",(this.fishXPos>t+this.flightDistance||R(this.fishXPos))&&(clearInterval(this.animation),this.fish.parentNode.removeChild(this.fish))}),17):setInterval((()=>{this.fishXPos-=12,this.fish.style.left=this.fishXPos+"px",(this.fishXPos<t-this.flightDistance||R(this.fishXPos))&&(clearInterval(this.animation),this.fish.parentNode.removeChild(this.fish))}),17)}}function E(t,e=1){const s=document.createElement("img");s.src="img/tiles/main.jpeg",s.style.cssText=`\n            position: absolute;\n            left: ${32*t}px;\n            bottom: ${32*e}px;\n            width: 32px;\n            height: 32px;\n        `,C.appendChild(s),A.push([t,e])}function D(t){E(t);const e=document.createElement("img");e.src="img/tiles/foundation.jpeg",e.style.cssText=`\n            position: absolute;\n            left: ${32*t}px;\n            bottom: 0;\n            width: 32px;\n            height: 32px;\n        `,C.appendChild(e)}function q(){P=Math.ceil(Number.parseInt(getComputedStyle(h).bottom)/32)}function W(){q(),T=!0;for(let t=0;t<A.length;t++){if(P<=-3&&(O("loss"),s="loss",$("fdsf")),Math.ceil(A[t][0])===X&&Math.ceil(A[t][1])+1===P){T=!1;break}if(Math.ceil(A[t][0])===X+2&&Math.ceil(A[t][1])+1===P){T=!1;break}}}function H(){if(q(),"right"===k){for(let t=0;t<A.length;t++)if(Math.ceil(A[t][0])===X+3&&Math.ceil(A[t][1])+1===P+1)return!1}else for(let t=0;t<A.length;t++)if(Math.ceil(A[t][0])===X&&Math.ceil(A[t][1])+1===P+1)return!1;return!0}function R(t){q(),t=Math.ceil(t/32);let e=!1;return c.forEach((s=>{if(s.state!=s.DEATH&&Math.ceil(s.posX)===t&&Math.ceil(s.posY)===P)return s.lives<=1?s.changeAnimate(s.DEATH):(s.changeAnimate(s.HURT),s.showHurt(),s.lives--),e=!0,!0})),!!e}class K{STAND="stand";ATTACK="attack";DEATH="death";WALK="walk";HURT="hurt";posX;posY;startX;travelInterval=6;direction=.1;img;block;blockSize=96;timer;animation;animationSome;state="stand";attack=!1;animateWasChanged=!0;isHurt=!1;SpriteMaxPosX=6;SpriteMaxPosY=5;SpritePosX=0;SpritePosY=0;NumPosStand=2;NumPosHurt=1;NumPosWalk=5;NumPosAttack=3;NUmPosDeath=4;lives=2;constructor(t,e){this.posX=t,this.posY=e,this.startX=this.posX,this.createEnimy(),z.push(this),this.lifeCycle(),this.changeAnimate(this.WALK),this.updatePositionX()}createEnimy(){this.block=document.createElement("div"),this.block.style.cssText=`\n                position: absolute;\n                left: ${32*this.posX}px;\n                bottom: ${32*this.posY}px;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n            `,i.appendChild(this.block),this.img=document.createElement("img"),this.img.src="img/characters/enemies/StandDog.svg",this.img.style.cssText=`\n                position: absolute;\n                left: 0;\n                bottom: 0;\n                width: ${this.blockSize*this.SpriteMaxPosX}px;\n                height: ${this.blockSize*this.SpriteMaxPosY}px;\n            `,this.block.appendChild(this.img)}lifeCycle(){this.timer=setInterval((()=>{if(this.checkCollide(),this.animateWasChanged)switch(this.animateWasChanged=!1,this.state){case this.DEATH:this.deathAnimate();break;case this.HURT:this.hurtAnimate();break;case this.WALK:this.walkAnimate();break;case this.STAND:this.standAnimate();break;case this.ATTACK:this.attackAnimate();break;case this.DEATH:this.deathAnimate()}}),17)}updatePositionX(){setInterval((()=>{this.block.style.left=32*this.posX+"px"}))}checkCollide(){P==this.posY?X==Math.floor(this.posX)?(w=!0,I=!1,("hit"!==S||this.state==this.HURT||this.isHurt)&&(this.attack||this.changeAnimate(this.ATTACK))):X==Math.floor(this.posX+2)||X==Math.floor(this.posX+1)?(I=!0,w=!1,("hit"!==S||this.state==this.HURT||this.isHurt)&&(this.attack||this.changeAnimate(this.ATTACK))):this.state===this.ATTACK&&(this.changeAnimate(this.WALK),this.attack=!1,I=!1,w=!1):this.state===this.ATTACK&&(this.changeAnimate(this.WALK),this.attack=!1,I=!1,w=!1)}changeAnimate(t){clearInterval(this.animation),this.animation=null,clearInterval(this.animationSome),this.animationSome=null,this.state=t,this.animateWasChanged=!0}standAnimate(){this.img.style.top="0px",this.img.style.left="0px",this.SpritePosX=1,this.animation=setInterval((()=>{this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",-this.SpritePosX*this.blockSize>=-(this.SpriteMaxPosX-1-this.NumPosStand)*this.blockSize?this.SpritePosX=this.SpriteMaxPosX:(this.SpritePosX--,this.img.style.left=-this.SpritePosX*this.blockSize+"px")):(this.img.style.transform="scale(1, 1)",this.SpritePosX===this.NumPosStand?this.SpritePosX=0:this.SpritePosX++,this.img.style.left=-this.SpritePosX*this.blockSize+"px")}),100)}walkAnimate(){this.img.style.top=4*-this.blockSize+"px",this.img.style.left="0px",this.SpritePosX=1,this.animationSome=setInterval((()=>{this.posX>this.startX+this.travelInterval?(this.direction*=-1,this.img.style.transform="scale(1, 1)"):this.posX<=this.startX&&(this.direction=Math.abs(this.direction),this.img.style.transform="scale(-1, 1)"),this.posX+=this.direction,this.block.style.left=32*this.posX+"px"}),17),this.animation=setInterval((()=>{this.img.style.left=-this.SpritePosX*this.blockSize+"px",this.SpritePosX===this.NumPosWalk?this.SpritePosX=0:this.SpritePosX++}),100)}attackAnimate(){this.attack=!0,this.img.style.top=-2*this.blockSize+"px",this.img.style.left="0px",this.SpritePosX=0,this.animation=setInterval((()=>{this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",-this.SpritePosX*this.blockSize>=-(this.SpriteMaxPosX-1-this.NumPosAttack)*this.blockSize?(this.SpritePosX=this.SpriteMaxPosX,"jump"!=S&&"fall"!=S&&($("hurt"),m<=1&&this.changeAnimate(this.STAND))):(this.SpritePosX--,this.img.style.left=-this.SpritePosX*this.blockSize+"px")):(this.img.style.transform="scale(1, 1)",this.SpritePosX>=this.NumPosAttack?(this.SpritePosX=0,"jump"!=S&&"fall"!=S&&($("hurt"),m<=1&&this.changeAnimate(this.STAND))):(this.SpritePosX++,this.img.style.left=-this.SpritePosX*this.blockSize+"px"))}),150)}deathAnimate(){this.img.style.top=-1*this.blockSize+"px",this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",this.img.style.left=-(this.SpriteMaxPosX-this.NUmPosDeath*this.blockSize)+"px",this.posXSprite=this.SpriteMaxPosX+2-this.NUmPosDeath,this.animation=setInterval((()=>{this.posXSprite<2?clearInterval(this.animation):(this.img.style.left=-this.posXSprite*this.blockSize+"px",this.posXSprite--)}),100)):(this.img.style.transform="scale(1, 1)",this.img.style.left="0px",this.posXSprite=0,this.animation=setInterval((()=>{this.posXSprite>this.NUmPosDeath?clearInterval(this.animation):(this.img.style.left=-this.posXSprite*this.blockSize+"px",this.posXSprite++)}),100)),clearInterval(this.timer),I=!1,w=!1}hurtAnimate(){this.img.style.top=-3*this.blockSize+"px",this.direction===Math.abs(this.direction)?(this.img.style.transform="scale(-1, 1)",this.img.style.left=-(this.SpriteMaxPosX-this.NumPosHurt)*this.blockSize+"px"):(this.img.style.transform="scale(1, 1)",this.img.style.left=-this.NumPosHurt*this.blockSize+"px"),setTimeout((()=>{this.isHurt=!1,this.lives<=0?this.changeAnimate(this.DEATH):this.changeAnimate(this.ATTACK)}),300)}showHurt(){const t=document.createElement("p");t.innerText="-1",t.style.cssText=`\n                color: red;\n                font-weight: 700;\n                font-size: 30px;\n                text-shadow: 1px 1px 2px #000;\n                position: absolute;\n                animation: showHurt 1s ease;\n                left: ${Number.parseInt(this.block.style.left+50)}px;\n                bottom: ${Number.parseInt(this.block.style.bottom+32)}px;\n            `,i.appendChild(t),setTimeout((()=>{t.parentNode.removeChild(t)}),1e3)}moveRight(){this.startX-=1/4,this.posX-=1/4}moveLeft(){this.startX+=1/4,this.posX+=1/4}}class U{seconds=0;minutes=0;elementMinites=document.querySelector("#minutes");elementSeconds=document.querySelector("#seconds");ticking;constructor(){this.startTimer()}stopTimer(){clearInterval(this.ticking)}startTimer(){clearInterval(this.ticking),this.ticking=setInterval((()=>{this.seconds++,60===this.seconds&&(this.seconds=0,this.minutes++),this.minutes<10?this.elementMinites.innerText="0"+this.minutes:this.elementMinites.innerText=this.minutes,this.seconds<10?this.elementSeconds.innerText="0"+this.seconds:this.elementSeconds.innerText=this.seconds}),1e3)}getTime(){let t,e;return e=this.minutes<10?"0"+this.minutes:this.minutes,t=this.seconds<10?"0"+this.seconds:this.seconds,e+":"+t}}class j{posX;posY;block;img;imgSrc="img/VictoryLodge.png";spritePosX=0;blockSize=250;spriteMaxPosX=7;timeInterval=100;animation;winPosX;constructor(t,e){this.posX=t,this.posY=e,this.winPosX=Math.floor(this.blockSize/2/32+this.posX),this.create(),this.animateStand()}checkWin(){let t=setInterval((()=>{Math.ceil(Number.parseInt(getComputedStyle(C).left)/32+this.winPosX-X/2)===X&&this.posY===P&&(O("win"),s="win",clearInterval(t))}),50)}create(){this.block=document.createElement("div"),this.block.style.cssText=`\n                position: absolute;\n                bottom: ${32*this.posY}px;\n                left: ${32*this.posX}px;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n            `,this.img=document.createElement("img"),this.img.src=this.imgSrc,this.img.style.cssText=`\n                position: absolute;\n                top: 0px;\n                left: ${this.spritePosX*this.blockSize}px;\n                width: ${this.blockSize*this.spriteMaxPosX}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n            `,this.block.appendChild(this.img),C.appendChild(this.block)}animateWin(){this.spritePosX=0,clearInterval(this.animation),this.animation=setInterval((()=>{this.spritePosX++,this.spritePosX===this.spriteMaxPosX&&(this.spritePosX=0),this.img.style.left=-this.spritePosX*this.blockSize+"px"}),this.timeInterval)}animateStand(){this.spritePosX=0,this.animation=setInterval((()=>{this.spritePosX++,3===this.spritePosX&&(this.spritePosX=0),this.img.style.left=-this.spritePosX*this.blockSize+"px"}),this.timeInterval)}}function O(t){if(o=!1,$("stand"),e.stopTimer(),"win"===t){n.animateWin(),document.querySelector(".timeGame").innerText=e.getTime(),setTimeout((()=>{document.querySelector("[data-custom-popup='win']").classList.add("open")}),n.timeInterval*(n.spriteMaxPosX-1)*2);const t=m/p;let s;s=t<=.35?1:t<=.7?2:3;const i=document.querySelector("#stars");for(let t=0;t<s;t++){const t=document.createElement("img");t.src="img/icons/star.png",t.alt="star",i.appendChild(t)}const o=localStorage.getItem("starsRaitingUser"),a=new URLSearchParams(window.location.search),l=parseInt(a.get("level"));if(o){const t=JSON.parse(o);t["l"+l]=s,localStorage.setItem("starsRaitingUser",JSON.stringify(t))}else{const t={};t["l"+l]=s,localStorage.setItem("starsRaitingUser",JSON.stringify(t))}}else document.querySelector("[data-custom-popup='loss']").classList.add("open")}class Y{nameDecor;src="img/decors/";x;y;blockSize;constructor(t,e,s){this.nameDecor=t,this.x=e,this.y=s,this.definitionOfDecoration(),this.createDecor()}definitionOfDecoration(){switch(this.nameDecor){case"tree":this.blockSize=150,this.src+="tree.png";break;case"fountain":this.blockSize=100,this.src+="fountain.png";break;case"куст":this.blockSize=100,this.src+="куст.png";break;case"пень":this.blockSize=100,this.src+="пень.png";break;case"цветок":this.blockSize=100,this.src+="цветок.png"}}createDecor(){const t=document.createElement("div"),e=document.createElement("img");t.style.cssText=`\n                position: absolute;\n                left: ${32*this.x}px;\n                bottom: ${32*this.y}px;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n            `,C.appendChild(t),e.src=this.src,e.style.cssText=`\n                position: absolute;\n                left: 0;\n                bottom: 0;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n            `,t.appendChild(e)}}const B={1:{lives:3,mapLenght:50,platforms:{1:{x:13,y:6,length:10}},buffs:{},decors:{1:{name:"tree",x:17,y:7},2:{name:"fountain",x:10,y:2},3:{name:"fountain",x:34,y:2}},enemies:{1:{x:35,y:2}},victoryLodge:{x:40,y:2},abysses:{2:{x1:25,x2:30}}},2:{lives:3,mapLenght:100,platforms:{1:{x:15,y:5,length:9},2:{x:25,y:8,length:5},3:{x:105,y:5,length:6}},buffs:{},decors:{1:{name:"tree",x:40,y:2},2:{name:"tree",x:25,y:9},3:{name:"tree",x:70,y:2},4:{name:"tree",x:77,y:2},5:{name:"tree",x:85,y:2},6:{name:"tree",x:90,y:2},1.1:{name:"fountain",x:15,y:6},1.2:{name:"fountain",x:34,y:2},1.3:{name:"fountain",x:65,y:2},1.4:{name:"fountain",x:47,y:2},1.5:{name:"fountain",x:56,y:2}},enemies:{1:{x:34,y:2},2:{x:15,y:6},3:{x:70,y:2},4:{x:80,y:2}},victoryLodge:{x:105,y:6},abysses:{1:{x1:10,x2:34},2:{x1:50,x2:55},3:{x1:60,x2:65}}},3:{lives:5,mapLenght:200,platforms:{1:{x:15,y:6,length:10},2:{x:15,y:5,length:10},3:{x:15,y:4,length:10},4:{x:15,y:3,length:10},5:{x:15,y:2,length:10},6:{x:30,y:11,length:10},7:{x:43,y:6,length:5},8:{x:59,y:2,length:10},17:{x:82,y:6,length:7},9:{x:93,y:11,length:7},10:{x:103,y:7,length:5},11:{x:59,y:2,length:9},11:{x:116,y:6,length:10},12:{x:130,y:3,length:3},13:{x:138,y:8,length:5},14:{x:148,y:13,length:10},15:{x:163,y:18,length:15},16:{x:147,y:5,length:8}},decors:{1:{name:"tree",x:15,y:7},8:{name:"tree",x:152,y:14},2:{name:"fountain",x:33,y:12},6:{name:"fountain",x:120,y:7},3:{name:"куст",x:10,y:2},4:{name:"пень",x:84,y:6.5},5:{name:"цветок",x:45,y:7},5:{name:"цветок",x:150,y:6}},buffs:{1:{name:"heart",x:73,y:2},2:{name:"heart",x:167,y:2}},enemies:{1:{x:25,y:2},2:{x:50,y:2},3:{x:59,y:3},4:{x:100,y:2},4:{x:116,y:7},4:{x:148,y:14}},victoryLodge:{x:170,y:19},abysses:{1:{x1:35,x2:50},2:{x1:77,x2:100},3:{x1:110,x2:160}}},4:{lives:3,mapLenght:300,platforms:{1:{x:3,y:1,length:10},2:{x:15,y:5,length:12},3:{x:30,y:9,length:3},4:{x:35,y:13,length:3},5:{x:39,y:2,length:7},6:{x:39,y:3,length:7},7:{x:39,y:3,length:7},8:{x:39,y:4,length:7},9:{x:39,y:5,length:7},10:{x:66,y:1,length:7},11:{x:105,y:5,length:6},12:{x:113,y:8,length:5},13:{x:121,y:11,length:4},14:{x:127,y:14,length:3},15:{x:131,y:18,length:2},16:{x:135,y:20,length:2},17:{x:135,y:1,length:2},18:{x:164,y:5,length:15},19:{x:182,y:8,length:2},20:{x:186,y:3,length:3},21:{x:194,y:4,length:2}},decors:{1:{name:"tree",x:10,y:2},27:{name:"tree",x:113,y:9},17:{name:"tree",x:57,y:2},2:{name:"tree",x:2,y:2},14:{name:"tree",x:34,y:14},40:{name:"tree",x:166,y:6},41:{name:"цветок",x:170,y:6},42:{name:"пень",x:174,y:5.5},43:{name:"цветок",x:181.5,y:9},44:{name:"цветок",x:186,y:4},45:{name:"пень",x:200.5,y:1.5},22:{name:"tree",x:86,y:2},31:{name:"куст",x:127,y:15},32:{name:"цветок",x:130,y:19},36:{name:"цветок",x:140,y:2},35:{name:"fountain",x:50,y:2},20:{name:"fountain",x:80,y:2},34:{name:"fountain",x:143,y:2},4:{name:"куст",x:7,y:2},37:{name:"куст",x:156,y:2},7:{name:"куст",x:32.5,y:2},10:{name:"куст",x:22,y:6},18:{name:"куст",x:70,y:2},25:{name:"куст",x:105,y:6},5:{name:"пень",x:42,y:5.5},11:{name:"пень",x:18,y:5.5},21:{name:"пень",x:95,y:1.5},33:{name:"пень",x:150,y:1.5},6:{name:"цветок",x:38,y:6},29:{name:"цветок",x:120,y:12},30:{name:"цветок",x:123,y:12},38:{name:"цветок",x:147,y:2},39:{name:"цветок",x:153,y:2},23:{name:"цветок",x:84,y:2},24:{name:"цветок",x:90,y:2},26:{name:"цветок",x:108,y:6},19:{name:"цветок",x:66,y:2},8:{name:"цветок",x:30,y:2},9:{name:"цветок",x:36,y:2},12:{name:"цветок",x:15,y:6},13:{name:"цветок",x:30,y:10},16:{name:"цветок",x:47,y:2}},buffs:{2:{name:"heart",x:33,y:2},3:{name:"heart",x:134.5,y:2}},enemies:{1:{x:15,y:6},2:{x:30,y:2},3:{x:47,y:2},4:{x:65,y:2},5:{x:79,y:2},6:{x:88,y:2},7:{x:141,y:2},8:{x:149,y:2},9:{x:166,y:6}},victoryLodge:{x:202,y:2},abysses:{2:{x1:1,x2:30},3:{x1:60,x2:77},4:{x1:99,x2:140},5:{x1:160,x2:200},6:{x1:210,x2:250}}},5:{lives:4,mapLenght:50,platforms:{1:{x:10,y:6,length:10}},decors:{1:{name:"tree",x:10,y:10},2:{name:"fountain",x:10,y:10}},buffs:{1:{name:"heart",x:10,y:2}},enemies:{1:{x:35,y:2}},victoryLodge:{x:10,y:2},abysses:{2:{x1:25,x2:30}}}};class F{nameBuff;src="img/buffs/";x;y;blockSize;decor;text;checkCollideTimer;constructor(t,e,s){this.nameBuff=t,this.x=e,this.y=s,this.definitionOfDecoration(),this.createDecor(),this.checkCollideTimer=setInterval((()=>{this.checkCollide()}),100)}definitionOfDecoration(){"heart"===this.nameBuff&&(this.blockSize=60,this.src+="рыба.png",this.text="+1")}createDecor(){this.decor=document.createElement("div");const t=document.createElement("img");this.decor.classList.add("buff"),this.decor.style.cssText=`\n                position: absolute;\n                left: ${32*this.x}px;\n                bottom: ${32*this.y}px;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n                overflow: hidden;\n                z-index: 3;\n            `,C.appendChild(this.decor),t.src=this.src,t.alt="buff",t.style.cssText=`\n                position: absolute;\n                left: 0;\n                bottom: 0;\n                width: ${this.blockSize}px;\n                height: ${this.blockSize}px;\n            `,this.decor.appendChild(t)}checkCollide(){const t=parseInt(this.decor.style.left)/32- -parseInt(C.style.left)/32-X-2;t>-1&&t<1&&this.y===P&&this.deathBuff()}deathBuff(){this.decor.querySelector("img").style.cssText="transform: scale(0);",console.log(1),clearInterval(this.checkCollideTimer),this.showText(),"heart"===this.nameBuff&&function(){m++;const t=document.querySelectorAll("#heart");if(console.log(t),t.length){const e=t[t.length-1];console.log(e),e.classList.add("active");const s=e.querySelector("img");let i=3;const n=setInterval((()=>{i>=0?(s.style.left=32*-i+"px",i--):clearInterval(n)}),100)}}()}showText(){const t=document.createElement("p");t.innerText=this.text,t.style.cssText=`\n                color: red;\n                font-weight: 700;\n                font-size: 30px;\n                text-shadow: 1px 1px 2px #000;\n                position: absolute;\n                animation: showHurt 1s ease;\n                left: ${Number.parseInt(this.decor.style.left)}px;\n                bottom: ${Number.parseInt(this.decor.style.bottom+32)}px;\n            `,i.appendChild(t),setTimeout((()=>{t.parentNode.removeChild(t)}),1e3)}}g=setInterval((()=>{v&&(v=!1,"fall"===S?(r.style.top=-2*y+"px","right"===k?(d=-2*y,r.style.transform="scale(1, 1)"):(d=-3*y,r.style.transform="scale(-1, 1)"),u=setInterval((()=>{x-=8,h.style.bottom=x+"px",W(),T||(h.style.bottom=32*P+"px",$("stand"))}),17),r.style.left=d+"px"):"stand"===S?u=setInterval((()=>{"right"===k?(d<=-y?d=0:d-=y,r.style.transform="scale(1, 1)"):(d>=-((b-1)*y-y)?d=-(b-1)*y:d+=y,r.style.transform="scale(-1, 1)"),r.style.top="-"+y+"px",r.style.left=d+"px"}),100):"hurt"===S?(r.style.top=4*-y+"px",r.style.left="right"===k?"0px":-(b-1)*y+"px",function(){const t=document.querySelectorAll("#heart.active");if(m--,t.length){const e=t[t.length-1];e.classList.remove("active");const s=e.querySelector("img");let i=0;const n=setInterval((()=>{i<=3?(s.style.left=32*-i+"px",i++):clearInterval(n)}),100)}}(),setTimeout((()=>{$(m<=0?"death":"stand")}),100)):"death"===S&&(r.style.top=5*-y+"px","right"===k?(r.style.transform="scale(1, 1)",r.style.left="0px",d=0,u=setInterval((()=>{d<=4*-y?($("dsfsf"),O("loss"),s="loss"):(d-=y,r.style.left=d+"px")}),150)):(r.style.transform="scale(-1, 1)",r.style.left=-(b*y-4*y)+"px",d=-(b*y-4*y),u=setInterval((()=>{d>=-(b-5)*y?($("dsfsf"),O("loss"),s="loss"):(d+=y,r.style.left=d+"px")}),150))))}),17),new class{constructor(){const t=new URLSearchParams(window.location.search).get("level");if(t&&t in B){const e=B[t],s=document.querySelectorAll("#NumLevel");s.length&&s.forEach((e=>{e.innerText=t})),m=e.lives,p=m;for(let t=.5;t<m+.5;t++)l.generateHearts(t,.5);Object.values(e.platforms).forEach((t=>{!function(t,e,s){for(let i=0;i<s;i++)E(t+i,e)}(t.x,t.y,t.length)}));let i=!1;for(let t=0;t<e.mapLenght;t++)i=!1,Object.values(e.abysses).forEach((e=>{t>e.x1&&t<e.x2&&(i=!0)})),i||D(t);Object.values(e.decors).forEach((t=>{new Y(t.name,t.x,t.y)})),Object.values(e.buffs).forEach((t=>{new F(t.name,t.x,t.y)})),Object.values(e.enemies).forEach((t=>{c.push(new K(t.x,t.y))})),n=new j(e.victoryLodge.x,e.victoryLodge.y),n.checkWin()}else document.querySelector("[data-custom-popup='404']").classList.add("open"),s="404",document.querySelector(".wrapper").classList.add("error")}},document.querySelector(".wrapper").classList.add("loaded"),new Audio("audio/main2.mp3").play()}))})();